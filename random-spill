#!/bin/bash

MIN_VERDI=1
MAKS_VERDI=100

nyttTall() {
  randomTall=$(( RANDOM / 327 ))
}

nyttTall

clear
echo "Hei! Velkommmen til random-spill."
sleep 2

until [[ $INPUT =~ $randomTall ]]; do
  clear
  echo $randomTall
  echo "Hvis du ønsker å avslutte tast 0"
  read -p "Gjett et tall mellom 1-100: " INPUT

  if [[ $INPUT = 0 ]]; then
    clear
    echo "Hadet bra :("
    sleep 1
    clear
    exit
  elif [[ $INPUT =~ ^-?[0-9]+$ ]]; then
    if [[ ! (INPUT -ge MIN_VERDI && INPUT -le MAKS_VERDI) ]]; then
      clear
      echo "Dette tallet er ikke innenfor 1-100"
      sleep 2
      continue
    else
      forsok=$(( forsok + 1 ))

      if [[ $INPUT = $randomTall ]]; then
        clear
        echo "RIKTIG!! :D"
        echo "Du brukte $forsok forsøk"
        forsok=0
        sleep 2
        clear

        while true; do
          echo "N for å avslutte"
          echo "Y for å fortsette"
          read -p "Vill du fortsette?: " INPUT

          case $INPUT in
            Y | y )
              nyttTall
              break
              ;;
            N | n )
              clear
              echo "Hadet bra :("
              sleep 1
              clear
              exit
              ;;
            * )
              clear
              echo "Dette var ikke et alternativ"
              sleep 1
              clear
              ;;
          esac
        done

      elif (( INPUT < randomTall  )); then
        clear
        echo "Tallet er større"
        sleep 1
      else
        clear
        echo "Tallet er mindre"
        sleep 1
      fi

    fi

  else
    clear
    echo "Dette var ikke et alternativ"
    sleep 1
    continue
  fi

done

exit